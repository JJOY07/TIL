# 가상머신

**가상화**란 하나의 물리적 자원을 여러 대의 논리적 시스템으로 활용하는 방안입니다.

즉, 하나의 물리적 하드웨어에 여러 컴퓨터가 구동되는 것처럼 *에뮬레이션(한 컴퓨터가 다른 컴퓨터처럼 똑같이 작동하도록 하는 기법)* 하는 것이죠.

## 가상머신을 왜 사용할까요?

1. 호환성

   일반적인 컴퓨터처럼 구동되므로 기존 PC, 서버에서 돌리던 것을 그대로 돌릴 수 있습니다. 

2. 격리성

   각 가상머신은 격리되어 있기 떄문에 하나의 가상머신이 오염되더라도 다른 가상머신에는 영향이 없습니다.

3. 캡슐화

   한번 구성된 가상 머신은 복제되어 또 다른 컴퓨터에 쓰일 수 있습니다.

4. 다른 종류의 하드웨어에서 돌릴 수 있습니다.

   다양한 환경에서 사용이 가능하지요!


## 가상머신의 종류

하이퍼바이저가 가상머신의 호스트 서버 장치를 가상머신이 어떻게 이용할 수 있도록 하느냐에 따라 **전가상화(Full Virtualization)**와 **반가상화(Half Virtualiztion)**으로 구분합니다.

###### 하이퍼바이저: 호스트 컴퓨터에서 다수의 OS를 동시해 실행하기 위한 논리적 플랫폼  (ex. VMware, Virtualbox)

![img](http://www.pyrasis.com/assets/images/DockerForTheReallyImpatientChapter01/4.png)

#### 1. 전 가상화(Full Virtualization)

위의 그림을 보면 하드웨어가 있고, 그 위에 하이퍼바이저, 그 위에 guest OS가 설치됩니다.

이 때, guest OS는 하이퍼바이저를 통해 하드웨어와 통신하는게 **전가상화**입니다.

예를 들면.. 

guest OS는 여러 종류가 있는데, 이 여러종류의 OS들은 같은 명령도 다른 언어를 사용해서 말합니다. (사람들이 여러 언어를 쓰듯!)

그럼 이 신호를 하이퍼바이저가 이 명령을 하나의 명령어로 번역해서 하드웨어에게 명령을 전달해 줍니다.

즉, 하이퍼바이저는 **통역**의 역할을 맡는 것 입니다. + **자원할당**도 함께 해주지요!

하지만 하이퍼바이저가 모든 명령을 통역해주어야 하기 때문에 성능이 느립니다.

그래서 나온게 바로 **반 가상화** 입니다.



 #### 2. 반 가상화(Para Virtualization)

**반 가상화**는 각각의 OS들이 명령을 전달할 때, 하드웨어가 알아들을 수 있는 하나의 명령어로 번역을 해서 바로! 하드웨어에 전달합니다.

어떻게 이런 방법이 가능할까요?

**OS 커널을 수정하면됩니다!**

음.. 리눅스는 오픈소스이니 수정할 수 있다고 치면.. 윈도우는?!

**Xen이라는 툴을 사용하면 다 가능합니다!**

그렇다면 하이퍼바이저는 무얼하는가?!

**OS커널들이 알아서 번역을하니 자원배분 문제만 잘 해결하면 된다**





## 가상머신의 문제점

속도가 빨라졌다고 해도 가상 머신은 항상 Guest OS를 설치해야 합니다.

![img](http://www.pyrasis.com/assets/images/DockerForTheReallyImpatientChapter01/5.png)

즉, 이미지 안에 항상 OS가 포함되어 용량이 커진다는 단점이 있죠.

이게 뭐가 문제냐면.. 이미지를 생성하고 실행할 수는 있는데, 용량이 크니 주고받기 힘들어 **배포와 관리**가 어려워집니다.

그래서 나온게 다음 포스팅부터 살펴볼 **Docker**입니다.

